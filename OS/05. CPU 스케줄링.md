# 5장 CPU scheduling

## CPU scheduling이 필요한 이유

CPU-burst Time의 분포

![image](https://user-images.githubusercontent.com/68107000/113509152-f435e700-958e-11eb-9c03-a305d7005258.png)

**여러 종류의 job (=process)가 섞여 있기 때문에** CPU scheduling이 필요하다.

interactive job에게 적절한 response 제공해야 하고 cpu와 I/O 장치 등 시스템 자원을 골고루 효율적으로 사용해야 한다.

Q. 빨간색 부분과 같이 cpu를 짧게 프로그램과 파란색 부분과 같이 cpu를 길게 쓰는 프로그램 중 **CPU를 누구한테 먼저 주어야 할까요? (= cpu scheduling)**

A. 이질적인 작업이 섞여있을 때, I/O bound job에 먼저 주는 것이 좋음. 이유는 오래 걸리는 작업을 먼저 요청하는 게 좋고 I/O 작업은 보통 사용자와 interaction하는 작업이기 때문이다.

## 프로세스의 특성 분류

- I/O-bound process

  - CPU를 잡고 계산하는 시간보다 I/O에 많은 시간이 필요한 job

  - many short CPU bursts 

  - ![한 프로세스의 일생](https://user-images.githubusercontent.com/68107000/113509084-9b664e80-958e-11eb-84d3-e01acc0b562c.png)

    CPU burst: cpu를 한 번에 얼마나 길게 쓰느냐

    즉, 중간중간 I/O가 많이 끼어들어서 CPU bursts가 잘려 짧아짐. 대신 수는 많아짐

  - 주로 사람과 interaction하는 게 많음.

- CPU-bound process

  - 계산 위주의 job
  - few, very long CPU bursts

## CPU Scheduler & Dispatcher

CPU Scheduler 와 Dispatcher 모두 운영체제의 특성 코드의 일부이다. 하드웨어나 단독의 응용 프로그램을 말하는 것이 아니다.

- <u>**Cpu Scheduler**</u>
  - ready 상태의 프로세스 중에서 이번에 CPU를 줄 프로세스를 **고른다. 결정한다.**
- **<u>Dispatcher</u>**
  - **CPU의 제어권**을 CPU scheduler에 의해 선택된 프로세스에게 **넘긴다.**
  - 이 과정을 context switch(문맥 교환)이라고 한다.
- CPU scheduling이 필요한 경우는 프로세스에게 다음과 같은 상태 변화가 있는 경우이다.
  1. Running ㅡ> Blocked
  2. Running ㅡ> Ready
  3. Blocked ㅡ> Ready
  4. Terminate

1, 4 에서 스케줄링은 **nonpreemptive** (- 걍제로 빼앗지 않고 **자진 반납**)

이외의 모든 스케줄링은 preemptive (- 강제로 cpu를 빼앗김)

## Scheduling Criteria

> Performance Index ( = Performance Measure, 성능 척도)
> 스케줄링 알고리즘 중 무엇이 좋은가 판단할 수 있는 척도, 방법

- **CPU utilization (이용률)**
  - keep the CPU as busy as possible
  - 비유: 주방장이 놀지 않고 일한 시간의 비율
  - 높을수록 좋음
- **Throughput (처리량)**
  - the number of processes that complete their execution per time unit
  - 비유: 주방장이 손님 몇 명을 받았냐
  - 높을수록 좋음
- **Turnaround time (소요 시간, 반환 시간)**
  - amount of time to execute a particular process
  - 비유: 중국집 들어와서 다 먹고 나간 시간
  - 짧을수록 좋음
- **Waiting time (대기 시간)**
  - amount of time a process has been waiting in the ready queue
  - cpu 쓰러 와서 기다린 시간의 합
  - 비유: 단무지 기다리는 시간, 이후에 짜장면 기다린 시간, 이후에 탕수육 기다린 시간의 합
  - 짧을수록 좋음
- **Response time (응답 시간)**
  - amount of time it takes from when a request was submitted until the first response is produced, not output (for time-sharing environment)
  - 프로세스가 cpu를 쓰러 들어와서 처음 cpu를 쓰기까지 걸린 시간. 프로세스가 처음 시작해서 처음으로 cpu를 얻은 시간이 아님
  - 비유: 단무지 기다리는 시간
  - 짧을수록 좋음